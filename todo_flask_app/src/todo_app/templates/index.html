{% extends 'base_template.html' %}
{% block content %}
  <h1>All tasks</h1>
  {% if tasks %}
    <ul class="card-list">
      {% for t in tasks %}
        <li class="card">
          <h3><a href="{{ url_for('task_detail', slug=t.slug) }}">{{ t.title }}</a></h3>
          <p class="muted">Priority: {{ t.priority }}{% if t.due_date %} • Due: {{ t.due_date }}{% endif %}</p>
          {% if t.description %}
            <p>{{ t.description[:180] }}{% if t.description|length > 180 %}…{% endif %}</p>
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No tasks yet. {% if current_user.is_authenticated %}<a href="{{ url_for('create_task') }}">Create your first task</a>.{% else %}Please <a href="{{ url_for('signup') }}">sign up</a> to add tasks.{% endif %}</p>
  {% endif %}
{% endblock %}
